# Шаблон бизнес-процессов

> **Использование**: Используй этот шаблон для создания `docs/product/business-processes.md`

## Структура документа

```markdown
# Бизнес-процессы: Soul KG CRM

## 1. Обзор процессов

[Краткое описание основных бизнес-процессов системы]

## 2. Детальное описание процессов

### 2.1 Процесс работы с лидом

**Название**: Работа с новым лидом  
**Участники**: Клиент, AI-агент квалификации, Менеджер продаж  
**Триггер**: Клиент отправляет первое сообщение в WhatsApp

**Шаги процесса**:
1. [Шаг 1]
2. [Шаг 2]
3. [Шаг 3]

**Результаты**:
- [Результат 1]
- [Результат 2]

**Исключения**:
- [Исключение 1]
- [Исключение 2]

### 2.2 Процесс подбора тура

[Аналогичная структура]

### 2.3 Процесс передачи партнеру

[Аналогичная структура]

### 2.4 Процесс импорта данных

[Аналогичная структура]

## 3. Диаграммы процессов

[Опционально: текстовое описание диаграмм или ссылки на диаграммы]

## 4. Интеграция процессов

[Как процессы взаимодействуют друг с другом]

## 5. Метрики процессов

[Какие метрики важны для каждого процесса]
```

## Заполнение

1. **Обзор**: Используй информацию из `docs/product/organization-info.md` (раздел 11 - операционный процесс)
2. **Детальное описание**: Используй информацию из `docs/product/organization-info.md` (раздел 11 - этапы 1-6)
3. **Участники**: Определи кто участвует в процессе (клиент, AI-агент, менеджер, партнер)
4. **Триггеры**: Что запускает процесс (сообщение клиента, изменение статуса, и т.д.)
5. **Результаты**: Что получается в результате процесса

## Примеры

### Пример процесса работы с лидом

```markdown
### 2.1 Процесс работы с лидом

**Название**: Работа с новым лидом  
**Участники**: Клиент, AI-агент квалификации, Менеджер продаж  
**Триггер**: Клиент отправляет первое сообщение в WhatsApp

**Шаги процесса**:
1. Клиент отправляет сообщение в WhatsApp
2. Система получает сообщение и создает нового клиента со статусом `new_lead`
3. AI-агент квалификации начинает диалог с клиентом
4. AI-агент задает вопросы из анкеты квалификации:
   - Даты поездки (точные/окно)
   - Количество человек (pax)
   - Уровень активности
   - Бюджетный коридор
   - Пожелания по питанию
5. Ответы сохраняются в профиле клиента
6. При успешной квалификации статус обновляется на `qualified`
7. Менеджер получает уведомление о квалифицированном лиде

**Результаты**:
- Клиент квалифицирован
- Профиль клиента заполнен данными
- Статус клиента обновлен на `qualified`
- Менеджер уведомлен

**Исключения**:
- Если клиент не отвечает в течение 24 часов, статус остается `new_lead`
- Если менеджер вмешивается в диалог, AI-агент передает управление менеджеру
- Если клиент запрашивает немедленную передачу менеджеру, процесс переходит к менеджеру
```

### Пример процесса подбора тура

```markdown
### 2.2 Процесс подбора тура

**Название**: Подбор тура для клиента  
**Участники**: Клиент, AI-агент подбора тура, Менеджер продаж  
**Триггер**: Клиент квалифицирован (статус `qualified`)

**Шаги процесса**:
1. AI-агент анализирует данные квалификации клиента
2. AI-агент выбирает подходящие туры из базы продуктов:
   - Соответствие датам
   - Соответствие количеству человек
   - Соответствие уровню активности
   - Соответствие бюджету
3. AI-агент предлагает клиенту 1-2 варианта туров с объяснением различий
4. Клиент выбирает тур или запрашивает изменения
5. AI-агент уточняет детали (опции, питание, особые пожелания)
6. AI-агент формирует "заказ-карту" с полной информацией
7. Менеджер получает уведомление о готовом заказе

**Результаты**:
- Клиент выбрал тур
- Сформирована заказ-карта
- Статус клиента обновлен на `proposal_sent` или `negotiation`
- Менеджер уведомлен

**Исключения**:
- Если клиент не выбирает тур в течение 48 часов, менеджер получает уведомление для ручного вмешательства
- Если клиент запрашивает изменения, которые требуют согласования с партнером, процесс переходит к менеджеру
```

## Правила описания процессов

1. **Четкость**: Каждый шаг должен быть четко описан
2. **Последовательность**: Шаги должны быть в логической последовательности
3. **Участники**: Ясно указано кто выполняет каждый шаг
4. **Результаты**: Описано что получается в результате процесса
5. **Исключения**: Описаны альтернативные сценарии и исключения

